{"title":"Being Trendy, Learning Svelte","markdown":{"yaml":{"title":"Being Trendy, Learning Svelte","author":"Maya Gans","date":"2021-08-30","description":"Documenting my first foray into the Svelte JavaScript frontend framework","categories":["JavaScript"],"image":"featured.png"},"headingText":"Step 1: Create a Svelte Template","containsRefs":false,"markdown":"\n\nSvelte is a compiler for creating reactive web applications. A reactive webapp *reacts* to data changes - it uses data when the state changes there is a reflection of that change in the browser. It bundles your JavaScript code into a single file for production without any extra scripts or libraries, resulting in a faster website!\n\nI've broken down this introduction into 8 pieces: \n\n- Step 1: Create a template\n- Step 2: Edit the template\n- Step 3: Understanding components\n- Step 4: Understanding `main.js`\n- Step 5: Bundling\n- Step 6: Make it reactive\n- Step 7: Creating an input\n- Step 8: Two way binding\n\n\nWe'll first install the `degit` library which will allow us to clone a Svelte template, with some additional cool features you don't get from plain old git. \n\n```\nnpm install -g degit\n```\n\nNow you can navigate to the directory you want to create your project in and type \n\n```\ndegit sveltejs/template svelteproj\n```\n\nWhich can be read as clone the template repository from sveltejs and put that in a folder locally called `svelteproj`\n\nThis gives us the starter file directory:\n\n|-- `public` where the output production code is put to deploy\n<br/>\n  |---- `favicon.png`\n  <br/>\n  |---- `global.css`\n  <br/>\n  |---- `index.html`\n  <br/>\n|-- `scripts`\n<br/>\n  |---- `setupTypeScript.js`\n  <br/>\n|-- `src` - write all our source code\n<br/>\n  |----`App.svelte` the svelte root component of the app\n  <br/>\n  |----`main.js` the main file to kickstart the app\n  <br/>\n|-- `.gitignore` don't include build file\n<br/>\n|-- `package.json` list dependencies and scripts\n<br/>\n|-- `README.md` help file\n<br/>\n|-- `rollup.config.js` watches, configures, and bundles code\n\nInstall the packages in our `package.json` file by running `npm install`. This adds a new folder to our directory, `node_modules` and a `package-lock.json` file:\n\n|-- <span class=\"highlight-code\">`node_modules`</span>\n<br/>\n|-- `public`\n<br/>\n  |---- `favicon.png`\n  <br/>\n  |---- `global.css`\n  <br/>\n  |---- `index.html`\n  <br/>\n|-- `scripts`\n<br/>\n  |---- `setupTypeScript.js`\n  <br/>\n|-- `src`\n<br/>\n  |----`App.svelte`\n  <br/>\n  |----`main.js`\n  <br/>\n|-- `.gitignore`\n<br/>\n|-- `package.json`\n<br/>\n|-- <span class=\"highlight-code\">`package-lock.json`</span>\n<br/>\n|-- `README.md`\n<br/>\n|-- `rollup.config.js`\n\nNow we can look at the template locally by running `npm run dev`. This will prompt you to open your local host and see the webpage below:\n\n```\n  Your application is ready~! ðŸš€\n\n  - Local:      http://localhost:5000\n  - Network:    Add `--host` to expose\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LOGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n```\n\n```{r, echo=FALSE, fig.align='center'}\nknitr::include_graphics(\"template.png\")\n```\n\nThis is the content of our app, being driven within `App.svelte`:\n\n```\n<script>\n\texport let name;\n</script>\n\n<main>\n\t<h1>Hello {name}!</h1>\n\t<p>Visit the <a href=\"https://svelte.dev/tutorial\">Svelte tutorial</a> to learn how to build Svelte apps.</p>\n</main>\n\n<style>\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n\t\tmargin: 0 auto;\n\t}\n\n\th1 {\n\t\tcolor: #ff3e00;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n\t}\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>\n```\n\n## Step 2: Edit the Template\n\nIf you change any of this code and save it, the changes will be rendered automatically! Let's try this by removing `\t<p>Visit the <a href=\"https://svelte.dev/tutorial\">Svelte tutorial</a> to learn how to build Svelte apps.</p>` and adding \t`<p><My single page webapp</p>`\n\n```{r, echo=FALSE, fig.align='center'}\nknitr::include_graphics(\"update_p.png\")\n```\n\n## Step 3: Understanding Components\n\nWe write most of our code in the `src` folder, and this is where we create our app components. Think of components as lego blocks that Svelte will stack together into the DOM to create your website. All components must have the extension `.svelte`. Let's look at the `App.svelte` component and break it down into it's three elements:\n\n#### `script` \n\nThe script is the component logic, here we are creating a variable called `name`\n\n```\n<script>\n\texport let name;\n</script>\n```\n\n#### `html template`\n\nThis is the html to be injected into the DOM\n\n```\n<main>\n\t<h1>Hello {name}!</h1>\n\t<p><My single page webapp</p>\n</main>\n```\n\n- `style` how to style the component that will be injected. \n\n```\n<style>\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n\t\tmargin: 0 auto;\n\t}\n\n\th1 {\n\t\tcolor: #ff3e00;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n\t}\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>\n```\n\n## Step 4: Understanding main.js\n\nThis is the file that kickstarts the app and sets everything up for us: \n\n```\nimport App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tname: 'world'\n\t}\n});\n\nexport default app;\n```\n\nWe import the code from `App.svelte`, so that we can create a single instance of the component called `app`. \n\nIn this specific instance called `app`, we specify the `target` (where we want to put the html), and we're putting it in the `document.body`.\n\nIf you navigate to `public/html` you'll see:\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset='utf-8'>\n\t<meta name='viewport' content='width=device-width,initial-scale=1'>\n\n\t<title>Svelte app</title>\n\n\t<link rel='icon' type='image/png' href='/favicon.png'>\n\t<link rel='stylesheet' href='/global.css'>\n\t<link rel='stylesheet' href='/build/bundle.css'>\n\n\t<script defer src='/build/bundle.js'></script>\n</head>\n\n<body> #<<\n</body> #<<\n</html>\n```\n\nBy assigning the target to `document.body` we're saying put our code inside those body tags. This is generally where component code will go but you can use whatever selectors you like!\n\nIn the second part of `app` we use `props` to pass data into the component. In the `script` portion of `App.svelte` we created a variable called `name` so that we can print `Hello {name}` in the html of the component. By assinging `world` to the `name` property, the `app` component will display `Hello world`. \n\n## Step 5: Bundling \n\nThis example has a single component but in reality we nest components and stack them together. All the scripts, styles and html from all our components are bundled together inside `public/build` and if we navigate back to our `index.html` we see that these bundled scripts are referenced inside the head of our page.\n\n```\n\t<link rel='stylesheet' href='/build/bundle.css'>\n\t<script defer src='/build/bundle.js'></script>\n```\n\n## Step 6: Make it reactive\n\nIn our script we leverage the variable `name` but let's modify that script a bit:\n\n```\n<script>\n\texport let name;\n</script>\n```\n\nRather than export the name as a prop, we can give it a string value: \n\n```\n<script>\n\tlet name = Maya;\n</script>\n```\n\nTo demonstrate the reactivity of the page, we can create a button element in our html with an on click handler that will change the name displayed when clicked\n\n```\n<main>\n\t<h1>Hello {name}!</h1>\n\t<p>My Single Page Webapp</p>\n\t<button on:click={handleClick}>update name</button>\n</main>\n```\n\nThen we need to add the `handleClick` function to our script code above:\n\n```\n<script>\n\tlet name = 'Maya';\n\t\n\tconst handleClick = () => {\n\tname = 'Gans'\n\t}\n</script>\n```\n\n`on:click={handleClick}` is Svelte syntax, which makes it really easy to react to and change dynamic data like our click event here. What happens when we build our project is it runs accross all our components, takes the Svelte syntax, and compules it all into vanialla JS. This compiled code can be seen in `build/bundle.js` [it's 459 lines for this one little component - but all the hard work is done for us!]\n\n## Step 7: Creating an input (your own name)\n\nLet's finish off this introduction by creating an input so that the user can display their own name on the page, and rather than need to click a button it will dynamically update with typing.\n\nJust by adding an input element we see we can create a text field:\n\n```\n<main>\n\t<h1>Hello {name}!</h1>\n\t<p>My Single Page Webapp</p>\n\t<button on:click={handleClick}>update name</button>\n\t<input type=\"text\">\n</main>\n```\n\n```{r, echo=FALSE, fig.align='center'}\nknitr::include_graphics(\"text_input.png\")\n```\n\nJust as we created the `handleClick` even on `click` we want to create another input event tracker here that updates whenever the user types. We'll call this function `handleInput`\n\n```\n<input type=\"text\" on:input={handleInput}>\n```\n\nNote that we are not invoking the function `handleInput()` as that would call the function when the page is loaded. Rather we want to call this function as a reference, only being called when the event occurs. \n\nNow let's write the function logic. We want `handleInput` to take the value of the input and assign it to `name`. We can do this by giving the function the event parameter as an argument `e` which lets us access the target element (the `input`).\n\n```\n<script>\n\tlet name = 'Maya';\n\t\n\tconst handleClick = () => {\n\t  name = 'Gans'\n\t}\n\t\n\tconst handleInput = (e) => {\n\t name = e.target.value\n\t}\n</script>\n```\n\nNow, everytime the user inputs text it is going to run the function and update the name in real time!\n\n\n\n![](typing.gif)\n\n\n...This is really cool but the binding is currently only one way. If we press the button and change `name` to `Gans`, the input text will not change to `Gans` (it remains `Maya` as pictured above)\n\n![](one-way.gif)\n\n\n\n## Step 8: Two way binding\n\nWe can add a `value` property to our input to set it to the `name` variable so whenever `name` changes, the input value will be updated to reflect that\n\n```\n<input type=\"text\" on:input={handleInput} value={name}>\n```\n\n![](two-way.gif)\n\n#### A Shortcut\n\nRather than writing the input element as we have, there is a Svelte shortcut for two way binding: we can use `bind` element to `name`. \n\n```\n<input type=\"text\" bind:value={name}>\n```\n\nAnd there you have it! A first contact introduction to Svelte. This was inspired by the [The Net Ninja's Tutorials](https://www.youtube.com/watch?v=QJJjXRIg7kI&list=PL4cUxeGkcC9hlbrVO_2QFVqVPhlZmz7tO&index=5) which you can follow along with here. I've also included this code in a [repo here](https://github.com/MayaGans/svelteproj).\n\nI put these skills to the test (and more!) by making a website to keep track of the Phish broadcasts entitled [Dinner and a Movie](bit.ly/phishdaam). You can check out the repo [here](https://github.com/MayaGans/DaaM)\n<br/>\n<br/>\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../inst/css/styles.css"],"toc":true,"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.0.37","pagetitle":"Maya Gans","title-block-banner":true,"title":"Being Trendy, Learning Svelte","author":"Maya Gans","date":"2021-08-30","description":"Documenting my first foray into the Svelte JavaScript frontend framework","categories":["JavaScript"],"image":"featured.png"},"extensions":{"book":{"multiFile":true}}}}}