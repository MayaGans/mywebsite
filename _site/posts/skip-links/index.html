<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Maya Gans">
<meta name="dcterms.date" content="2021-08-30">
<meta name="description" content="Creating a Skip Link in Shiny apps!">

<title>Maya Gans</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../inst/css/styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">maya<br>gans</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">blog</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dataviz.html">dataviz</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html">projects</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html">resume</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Skip Links</h1>
                  <div>
        <div class="description">
          Creating a Skip Link in Shiny apps!
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">JavaScript</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Maya Gans </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 30, 2021</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#nav-bar" id="toc-nav-bar" class="nav-link active" data-scroll-target="#nav-bar">Nav Bar</a></li>
  <li><a href="#create-a-link" id="toc-create-a-link" class="nav-link" data-scroll-target="#create-a-link">Create a link</a></li>
  <li><a href="#styling" id="toc-styling" class="nav-link" data-scroll-target="#styling">Styling</a></li>
  <li><a href="#link-re-direct" id="toc-link-re-direct" class="nav-link" data-scroll-target="#link-re-direct">Link Re-direct</a></li>
  <li><a href="#putting-it-all-together" id="toc-putting-it-all-together" class="nav-link" data-scroll-target="#putting-it-all-together">Putting it all together</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>I took Jon Kuperman’s amazing accessibility intro course on Frontend Masters and one of the coolest things he demonstrated was how to create a skip link. <strong>Skip links allow a keyboard only user to tab directly to the content of a page, rather than first tab through the page’s entire menu.</strong> In this post, I wanted to share what I learned as it applies to Shiny!</p>
<p>I like to demonstrate where we’re going before I break it down. In the navbar below you see a link with the text “Skip to Main Content”. Clicking this link directs us to the button with the text “Tab Skip to Here!” [visible by the focus ring around the button]. In this post we’re going to create and style the skip link!</p>
<p><br> <br></p>
<p><code>{#r, echo=FALSE} shiny::tagList( shiny::tags$a(id="skiplink-pre", "Skip to Main Content", href="#first-button-pre"),     shiny::navbarPage("App Title",                       shiny::tabPanel("Plot"),                       shiny::tabPanel("Summary"),                       shiny::tabPanel("Table")     ),     shiny::tags$button(id="first-button-pre", "Tab Skip to Here!") )</code></p>
<p><br> <br></p>
<section id="nav-bar" class="level2">
<h2 class="anchored" data-anchor-id="nav-bar">Nav Bar</h2>
<p>In Shiny, when we create a navigation bar, we get a <code>&lt;nav&gt;</code> element with the ARIA role “navigation”. The navbar contains a tabbable list with <code>data-values</code> set to the tab’s titles.</p>
<pre id="r"><code>shiny::navbarPage("App Title",
  shiny::tabPanel("Plot"),
  shiny::tabPanel("Summary"),
  shiny::tabPanel("Table")
)</code></pre>
<p><br> <br></p>
<pre id="r"><code>&lt;nav class="navbar navbar-default navbar-static-top" role="navigation"&gt;
  &lt;div class="container-fluid"&gt;
    &lt;div class="navbar-header"&gt;
      &lt;span class="navbar-brand"&gt;App Title&lt;/span&gt;
    &lt;/div&gt;
    &lt;ul class="nav navbar-nav" data-tabsetid="8029"&gt;
      &lt;li class="active"&gt;
        &lt;a href="#tab-8029-1" data-toggle="tab" data-value="Plot"&gt;Plot&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="#tab-8029-2" data-toggle="tab" data-value="Summary"&gt;Summary&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="#tab-8029-3" data-toggle="tab" data-value="Table"&gt;Table&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/nav&gt;</code></pre>
<p>Now, let’s imagine your navbar has some drop down menues. If the navbar has 20 tabbable items, the user is going to need to tab through to number 21 in order to get to the links on the page they are browsing!</p>
</section>
<section id="create-a-link" class="level2">
<h2 class="anchored" data-anchor-id="create-a-link">Create a link</h2>
<p>The first step in creating a skip link is to create the link itself. Before our navbar let’s pre-append a link with the <code>id=skiplink</code>.</p>
<p><code>{#r, eval=FALSE} shiny::tags$a(id="skiplink", "Skip to Main Content")</code></p>
<p><code>{#r, eval=FALSE} &lt;a id="skiplink"&gt;Skip to Main Content&lt;/a&gt;</code></p>
</section>
<section id="styling" class="level2">
<h2 class="anchored" data-anchor-id="styling">Styling</h2>
<p>Now let’s style the link as hidden when it’s not being tabbed/focused. We will do this by positioning the link out of frame using a <code>transform</code>.</p>
<p>We’ll also use the css pseudo class <code>focus</code> so that when the link is tabbed over it is put back in frame and made obvious to the user:</p>
<pre id="css"><code>#skiplink {
  position: absolute;
  transform: translateY(-100%);
}

#skiplink:focus {
  transform: translateY(0%);
  background-color: lightyellow;
  padding: 20px;
  z-index: 9999;
}</code></pre>
</section>
<section id="link-re-direct" class="level2">
<h2 class="anchored" data-anchor-id="link-re-direct">Link Re-direct</h2>
<p>The last step is to make our link go where we want it - to the first tabbable element on our page (“first-button”). We can do this by making the <code>href</code> of the link match the id of the first tabbable element:</p>
<p><code>{#r, eval=FALSE} shiny::tags$a(id="skiplink", "Skip to Main Content", href="first-button")</code></p>
<p><code>{#r, eval=FALSE} &lt;a id="skiplink" href="#first-button"&gt;Skip to Main Content&lt;/a&gt;</code></p>
</section>
<section id="putting-it-all-together" class="level2">
<h2 class="anchored" data-anchor-id="putting-it-all-together">Putting it all together</h2>
<p>Now we have a link before our navbar, followed by the content of our page and the <code>css</code> needed to style our link:</p>
<p><code>{#r, eval=FALSE} shinyApp(   ui = basicPage(     tags$a(id="skiplink", "Skip to Main Content", href="#first-button"),     shiny::navbarPage("App Title",                       shiny::tabPanel("Plot"),                       shiny::tabPanel("Summary"),                       shiny::tabPanel("Table")     ),     tags$button(id="first-button", "Tab Skip to Here!"),     tags$style(HTML("       #skiplink {         position: absolute;         transform: translateY(-100%);       }       #skiplink:focus {       transform: translateY(0%);       background-color: lightyellow;       padding: 20px;       z-index: 9999;       }"))   ),   server = function(input, output) {   } )</code></p>
<p><br></p>
<p>By clicking tab to go forwards (or shift tab to go backwards), you should now be able to only see the skip link when it’s being focused on:</p>
<p><code>{#r, echo=FALSE} shiny::tagList( shiny::tags$a(id="skiplink", "Skip to Main Content", href="#first-button"),     shiny::navbarPage("App Title",                       shiny::tabPanel("Plot"),                       shiny::tabPanel("Summary"),                       shiny::tabPanel("Table")     ),     shiny::tags$button(id="first-button", "Tab Skip to Here!") )</code></p>
<style>
#skiplink {
        position: absolute;
        top: 0;
        left: 0;
        width: 1px;
      }
      #skiplink:focus {
      transform: translateY(0%);
      background-color: lightyellow;
      padding: 20px;
      z-index: 9999;
      width: auto;
      position: relative;
      }
      #skiplink-pre{
      transform: translateY(0%);
      background-color: lightyellow;
      padding: 20px;
      z-index: 9999;
      }
</style>
<p><br></p>
<p>There are SO many gems in Jon’s course, and it is genuinely fun to start to think about how to integrate these changes and make your website as accessible as possible. Shiny uses bootstrap, a design system that has put a lot of time and thought into accessibility so we get a lot for free, but I hope to continue this series with some other tips if you’re building any custom components.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>